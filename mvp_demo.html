<!DOCTYPE html>
<html lang="pt-br" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glitch Arena (Alpha)</title>
    
    <!-- Fontes do Novo Tema -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- CSS Atualizado -->
    <link rel="stylesheet" href="style.css?v=4.0">
    <script src="https://cdn.tailwindcss.com"></script> <!-- Tailwind para utilit√°rios r√°pidos -->
</head>
<body>

    <!-- BANNER ALPHA -->
    <div class="fixed top-0 left-0 right-0 bg-yellow-600/90 text-white text-[10px] md:text-xs font-bold text-center py-1 z-[100] backdrop-blur-sm">
        üöß ALPHA: Layouts e regras sujeitos a altera√ß√£o. üöß
    </div>

    <!-- NAVBAR (NOVO) -->
    <nav class="navbar mt-6"> <!-- mt-6 para compensar o banner -->
        <div class="logo glitch-text" data-text="GLITCH ARENA">GLITCH ARENA</div>
        
        <div class="nav-controls">
            <div class="user-info hidden" id="nav-user-info"> <!-- Oculto at√© logar -->
                <span id="nav-user-name" class="font-bold hidden md:inline">Jogador</span>
                <span id="nav-user-balance" class="badge">GC 0.00</span>
            </div>
            <!-- Bot√£o de Tema (Funcionalidade Visual) -->
            <button id="theme-toggle" class="btn-icon" aria-label="Alternar Tema" style="border: 1px solid var(--border-color); padding: 8px; border-radius: 8px;">
                üåó
            </button>
            <button id="logout-btn" class="btn-icon hidden text-red-400 font-bold" title="Sair">Exit</button>
        </div>
    </nav>

    <!-- LOADING -->
    <div id="loading-shell" class="fixed inset-0 z-[90] flex items-center justify-center bg-[var(--bg-body)]">
        <div class="loader"></div>
    </div>

    <!-- AUTH SHELL (Login/Registro) -->
    <div id="auth-shell" class="hidden container min-h-[80vh] flex flex-col items-center justify-center">
        
        <!-- Landing Page -->
        <div id="landing-page" class="page active w-full text-center">
            <div class="max-w-2xl mx-auto">
                <h1 class="glitch-text text-4xl md:text-6xl mb-6">DESAFIE O SISTEMA</h1>
                <p class="text-[var(--text-secondary)] text-xl mb-8">Aposte na sua pr√≥pria habilidade em League of Legends.</p>
                
                <div class="flex justify-center gap-4">
                    <button id="auth-login-btn" class="glass-card px-8 py-3 font-bold hover:bg-[var(--bg-card)]">ENTRAR</button>
                    <button id="auth-register-btn" class="glass-card px-8 py-3 font-bold bg-[var(--primary-purple)] text-white border-none">CRIAR CONTA</button>
                </div>
            </div>

            <div class="stats-grid mt-16">
                <div class="card">
                    <span class="stat-label text-[var(--text-secondary)]">Passo 1</span>
                    <h3 class="text-xl font-bold mt-2 text-[var(--accent-cyan)]">Deposite</h3>
                    <p class="text-sm mt-2 text-[var(--text-secondary)]">Compre Glitchcoins via PIX instant√¢neo.</p>
                </div>
                <div class="card">
                    <span class="stat-label text-[var(--text-secondary)]">Passo 2</span>
                    <h3 class="text-xl font-bold mt-2 text-[var(--primary-purple)]">Jogue</h3>
                    <p class="text-sm mt-2 text-[var(--text-secondary)]">Cumpra miss√µes na sua Ranked.</p>
                </div>
                <div class="card">
                    <span class="stat-label text-[var(--text-secondary)]">Passo 3</span>
                    <h3 class="text-xl font-bold mt-2 text-[var(--accent-pink)]">Lucre</h3>
                    <p class="text-sm mt-2 text-[var(--text-secondary)]">Saque seus ganhos na hora.</p>
                </div>
            </div>
        </div>

        <!-- Login Form -->
        <div id="login-page" class="page hidden w-full max-w-md">
            <div class="card">
                <h2 class="text-2xl font-bold text-center mb-6 font-[var(--font-display)]">LOGIN</h2>
                <form id="login-form" class="space-y-4">
                    <p id="login-error-msg" class="text-[var(--accent-orange)] text-sm text-center hidden"></p>
                    <input type="email" id="login-email" class="form-input" placeholder="E-mail" required>
                    <input type="password" id="login-password" class="form-input" placeholder="Senha" required>
                    <button type="submit" id="login-submit-btn" class="w-full glass-card bg-[var(--primary-blue)] text-white font-bold py-3 mt-4 hover:brightness-110">
                        <span id="login-btn-text">ACESSAR</span>
                        <div id="login-loader" class="loader w-5 h-5 mx-auto hidden"></div>
                    </button>
                </form>
                <div class="text-center mt-6 pt-4 border-t border-[var(--border-color)]">
                    <button id="google-login-btn" class="text-sm text-[var(--text-secondary)] hover:text-white">Entrar com Google</button>
                    <p class="text-sm mt-2 text-[var(--text-secondary)]">Novo? <button id="login-goto-register" class="text-[var(--accent-cyan)] font-bold">Criar conta</button></p>
                </div>
            </div>
        </div>

        <!-- Register Form -->
        <div id="register-page" class="page hidden w-full max-w-md">
            <div class="card">
                <h2 class="text-2xl font-bold text-center mb-6 font-[var(--font-display)]">REGISTRO</h2>
                
                <div class="flex justify-between mb-6 px-2">
                    <span id="step-ind-1" class="text-xs font-bold text-[var(--primary-purple)]">1. Acesso</span>
                    <span id="step-ind-2" class="text-xs text-[var(--text-secondary)]">2. Pessoal</span>
                    <span id="step-ind-3" class="text-xs text-[var(--text-secondary)]">3. Confirmar</span>
                </div>

                <form id="register-form" class="space-y-4">
                    <p id="register-error-msg" class="text-[var(--accent-orange)] text-sm text-center hidden"></p>
                    
                    <!-- Step 1 -->
                    <div id="register-step-1" class="register-step">
                        <input type="email" id="reg-email" class="form-input" placeholder="E-mail" required>
                        <input type="password" id="reg-password" class="form-input" placeholder="Senha (min 6)" required>
                        <input type="password" id="reg-confirm-password" class="form-input" placeholder="Confirmar Senha" required>
                        <button type="button" id="reg-next-step-1" class="w-full glass-card bg-[var(--primary-purple)] text-white font-bold py-3 mt-2">PR√ìXIMO</button>
                    </div>

                    <!-- Step 2 -->
                    <div id="register-step-2" class="register-step hidden">
                        <input type="text" id="reg-fullname" class="form-input" placeholder="Nome Completo" required>
                        <input type="text" id="reg-cpf" class="form-input" placeholder="CPF (apenas n√∫meros)" required>
                        <input type="date" id="reg-birthdate" class="form-input text-[var(--text-secondary)]" required>
                        <input type="text" id="reg-referral" class="form-input uppercase tracking-widest" placeholder="C√≥d. Convite (Opcional)">
                        <button type="button" id="reg-next-step-2" class="w-full glass-card bg-[var(--primary-purple)] text-white font-bold py-3 mt-2">PR√ìXIMO</button>
                    </div>

                    <!-- Step 3 -->
                    <div id="register-step-3" class="register-step hidden">
                        <div class="bg-[var(--bg-input)] border border-[var(--accent-orange)] p-3 rounded mb-4 text-xs text-[var(--text-secondary)]">
                            <p class="text-[var(--accent-orange)] font-bold mb-1">‚ö†Ô∏è PROIBIDO:</p>
                            <p>‚Ä¢ Smurf / Elojob</p>
                            <p>‚Ä¢ Contas compartilhadas</p>
                        </div>
                        <div class="flex items-start mb-6 gap-2">
                            <input id="reg-terms" type="checkbox" class="mt-1 accent-[var(--primary-purple)]">
                            <label for="reg-terms" class="text-xs text-[var(--text-secondary)]">Li e concordo com os <span id="open-terms-btn" class="text-[var(--primary-blue)] cursor-pointer font-bold">Termos de Uso</span>.</label>
                        </div>
                        <button type="button" id="reg-submit" class="w-full glass-card bg-[var(--primary-purple)] text-white font-bold py-3 mt-2" disabled>
                            <span id="reg-btn-text">FINALIZAR</span>
                            <div id="reg-loader" class="loader w-5 h-5 mx-auto hidden"></div>
                        </button>
                    </div>
                </form>
                <p class="text-center text-sm text-[var(--text-secondary)] mt-4">J√° tem conta? <button id="register-goto-login" class="text-[var(--accent-cyan)] font-bold">Login</button></p>
            </div>
        </div>

        <!-- Terms Modal -->
        <div id="terms-page" class="hidden fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm">
            <div class="card w-full max-w-2xl max-h-[85vh] flex flex-col">
                <div class="flex justify-between items-center pb-4 border-b border-[var(--border-color)]">
                    <h2 class="text-xl font-bold font-[var(--font-display)]">TERMOS DE USO</h2>
                    <button id="close-terms-btn" class="text-2xl hover:text-[var(--accent-orange)]">&times;</button>
                </div>
                <div class="flex-grow overflow-y-auto py-4 text-sm text-[var(--text-secondary)] space-y-4 custom-scroll">
                    <p>1. Ao usar o Glitch Arena, voc√™ concorda com as regras de Fair Play.</p>
                    <p>2. Smurfing resulta em banimento imediato.</p>
                    <p>3. O saldo √© virtual at√© a aprova√ß√£o do saque.</p>
                </div>
                <div class="pt-4 border-t border-[var(--border-color)] text-center">
                    <button id="terms-ok-btn" class="glass-card bg-[var(--primary-blue)] px-8 py-3 font-bold text-white w-full">LI E CONCORDO</button>
                </div>
            </div>
        </div>
    </div>

    <!-- APP SHELL (Dashboard Principal) -->
    <div id="app-shell" class="hidden container pb-28">
        
        <!-- Home (Dashboard) -->
        <div id="home-page" class="page">
            <section class="card mb-6 bg-gradient-to-r from-[var(--bg-card)] to-[#1a1a2e]">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold font-[var(--font-display)]">ARENA DE JOGOS</h2>
                    <span class="text-xs bg-[var(--bg-input)] px-2 py-1 rounded border border-[var(--border-color)] text-[var(--accent-cyan)]">ONLINE</span>
                </div>

                <!-- Game Card: LoL -->
                <div id="select-lol" class="glass-card p-4 flex items-center gap-4 cursor-pointer hover:border-[var(--primary-purple)] transition mb-4">
                    <div class="w-12 h-12 bg-[#091428] rounded-lg flex items-center justify-center border border-[#C89B3C]">
                        <span class="font-bold text-[#C89B3C]">L</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">League of Legends</h3>
                        <p class="text-xs text-[var(--text-secondary)]">Desafios de KDA, Vit√≥ria e Farm</p>
                    </div>
                    <div class="ml-auto text-[var(--accent-cyan)] text-2xl">‚Üí</div>
                </div>

                <!-- Game Card: Valorant (Disabled) -->
                <div class="glass-card p-4 flex items-center gap-4 opacity-50 grayscale cursor-not-allowed">
                    <div class="w-12 h-12 bg-[#FF4655] rounded-lg flex items-center justify-center text-white font-bold">V</div>
                    <div>
                        <h3 class="font-bold text-lg">Valorant</h3>
                        <p class="text-xs">Em breve</p>
                    </div>
                </div>
            </section>

            <!-- Status Card (Conex√£o) -->
            <section class="card mb-6">
                <div class="flex justify-between items-center">
                    <div>
                        <h3 class="font-bold text-sm text-[var(--text-secondary)]">CONTA VINCULADA</h3>
                        <p id="lol-status" class="text-[var(--accent-orange)] font-bold mt-1">Desconectado</p>
                    </div>
                    <button id="lol-connect-btn" data-game="lol" class="glass-card px-4 py-2 text-sm font-bold hover:bg-[var(--bg-input)]">CONECTAR</button>
                </div>
            </section>
        </div>

        <!-- Challenges Page -->
        <div id="challenges-page" class="page hidden">
            <button id="back-to-home" class="mb-6 text-[var(--text-secondary)] hover:text-white flex items-center gap-2 font-bold">
                <span>‚Üê</span> VOLTAR
            </button>
            
            <div class="flex justify-between items-end mb-6">
                <div>
                    <h1 id="challenges-title" class="text-2xl font-bold font-[var(--font-display)] text-[var(--primary-blue)]">DESAFIOS</h1>
                    <p id="challenges-subtitle" class="text-sm text-[var(--text-secondary)]">Carregando odds...</p>
                </div>
            </div>
            
            <div id="challenges-list" class="space-y-4"></div>
            
            <!-- Custom Bet Card -->
            <div id="request-bet-card" class="hidden mt-8 card border-dashed border-2 border-[var(--border-color)] text-center bg-transparent hover:border-[var(--primary-purple)] cursor-pointer group">
                <h3 class="font-bold mb-2 group-hover:text-[var(--primary-purple)] transition">CRIE SEU DESAFIO</h3>
                <p class="text-sm text-[var(--text-secondary)] mb-4">Defina sua pr√≥pria meta de Kills.</p>
                <button id="open-request-bet-modal" class="glass-card px-6 py-2 text-sm font-bold">PERSONALIZAR</button>
            </div>
        </div>

        <!-- Outras P√°ginas -->
        <div id="bets-page" class="page hidden"><h1 class="text-2xl font-bold mb-6 font-[var(--font-display)]">APOSTAS ATIVAS</h1><div id="active-bets-list" class="space-y-4"></div></div>
        <div id="history-page" class="page hidden"><h1 class="text-2xl font-bold mb-6 font-[var(--font-display)]">HIST√ìRICO</h1><div id="history-bets-list" class="space-y-4"></div></div>
        
        <!-- Profile Page -->
        <div id="profile-page" class="page hidden">
            <h1 class="text-2xl font-bold mb-6 font-[var(--font-display)]">PERFIL</h1>
            
            <!-- Wallet Stats -->
            <div class="stats-grid mb-8">
                <div class="card stat-box border-l-4 border-[var(--primary-blue)]">
                    <span class="stat-label text-xs text-[var(--text-secondary)] uppercase">Saldo Real</span>
                    <span id="wallet-balance" class="stat-value">GC 0.00</span>
                </div>
                <div class="card stat-box border-l-4 border-[var(--primary-purple)]">
                    <span class="stat-label text-xs text-[var(--text-secondary)] uppercase">Saldo B√¥nus</span>
                    <span id="bonus-balance" class="stat-value text-[var(--primary-purple)]">GC 0.00</span>
                </div>
            </div>

            <!-- Actions -->
            <div class="grid grid-cols-2 gap-4 mb-8">
                <button id="open-deposit-modal" class="card font-bold hover:bg-green-900/30 border-green-500/50 text-green-400 transition">DEPOSITAR</button>
                <button id="open-withdraw-modal" class="card font-bold hover:bg-[var(--bg-input)] transition">SACAR</button>
            </div>

            <!-- Rollover -->
            <div id="rollover-container" class="card mb-6 hidden">
                <div class="flex justify-between text-sm mb-2"><span class="text-[var(--text-secondary)]">Rollover Restante</span><span id="rollover-text" class="font-bold text-[var(--primary-purple)]">GC 0.00</span></div>
                <div class="progress-container"><div id="rollover-bar" class="progress-bar" style="width:0%"></div></div>
                <button id="convert-bonus-btn" class="w-full mt-4 glass-card py-2 text-xs font-bold opacity-50" disabled>CONVERTER B√îNUS</button>
            </div>

            <!-- Tools -->
            <div class="card mb-6">
                <h3 class="font-bold mb-4 text-sm text-[var(--text-secondary)] uppercase">Ferramentas</h3>
                <div class="flex gap-2 mb-4">
                    <input id="coupon-input" class="form-input mb-0" placeholder="C√ìDIGO PROMOCIONAL">
                    <button id="redeem-coupon-btn" class="glass-card px-6 font-bold bg-[var(--primary-purple)] text-white border-none">USAR</button>
                </div>
                <div class="p-3 bg-[var(--bg-input)] rounded border border-[var(--border-color)] flex justify-between items-center">
                    <div>
                        <p class="text-[10px] text-[var(--text-secondary)] uppercase">Seu c√≥digo de convite</p>
                        <p id="my-referral-code" class="font-bold font-mono tracking-widest text-[var(--accent-cyan)] cursor-pointer">---</p>
                    </div>
                    <span class="text-xs text-[var(--text-secondary)]">Clique para copiar</span>
                </div>
            </div>

            <!-- Identity -->
            <div class="card">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="font-bold text-sm text-[var(--text-secondary)] uppercase">Identidade</h3>
                    <span id="kyc-status" class="text-[10px] font-bold bg-[var(--bg-input)] px-2 py-1 rounded border border-[var(--border-color)]">PENDENTE</span>
                </div>
                <div id="kyc-content" class="text-xs text-[var(--text-secondary)] space-y-1">
                    <p>Nome: <span id="kyc-fullname" class="text-white">-</span></p>
                    <p>CPF: <span id="kyc-cpf" class="text-white">-</span></p>
                </div>
                <div id="kyc-loading" class="hidden text-center mt-2"><div class="loader w-4 h-4 inline-block"></div></div>
                <button id="kyc-verify-btn" class="w-full mt-3 glass-card py-2 text-xs font-bold text-[var(--primary-blue)] hidden">VALIDAR DADOS</button>
            </div>
        </div>
    </div>

    <!-- Bottom Nav (Mobile) -->
    <nav class="bottom-nav fixed bottom-0 left-0 right-0 bg-[var(--bg-card)] border-t border-[var(--border-color)] z-40 md:hidden">
        <div class="flex justify-around p-2">
            <button data-page="home-page" class="nav-item active flex flex-col items-center p-2 text-[var(--text-secondary)]"><span class="text-xl">üè†</span><span class="text-[10px] mt-1">In√≠cio</span></button>
            <button data-page="bets-page" class="nav-item flex flex-col items-center p-2 text-[var(--text-secondary)]"><span class="text-xl">‚öîÔ∏è</span><span class="text-[10px] mt-1">Desafios</span></button>
            <button data-page="history-page" class="nav-item flex flex-col items-center p-2 text-[var(--text-secondary)]"><span class="text-xl">üìú</span><span class="text-[10px] mt-1">Hist√≥rico</span></button>
            <button data-page="profile-page" class="nav-item flex flex-col items-center p-2 text-[var(--text-secondary)]"><span class="text-xl">üë§</span><span class="text-[10px] mt-1">Perfil</span></button>
        </div>
    </nav>

    <!-- Floating Bet Slip -->
    <div id="bet-slip-fab" class="hidden fixed bottom-24 right-6 z-50 md:bottom-10">
        <div class="w-16 h-16 rounded-full flex items-center justify-center shadow-[var(--shadow-glow)] cursor-pointer hover:scale-110 transition relative bg-[var(--bg-card)] border border-[var(--primary-purple)]">
            <span class="text-2xl">üßæ</span>
            <span id="bet-slip-count" class="absolute -top-2 -right-2 bg-[var(--accent-orange)] text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center border-2 border-[var(--bg-body)]">0</span>
        </div>
    </div>

    <!-- MODALS -->
    <div id="modal-backdrop" class="hidden fixed inset-0 bg-black/80 z-[60] backdrop-blur-sm"></div>

    <!-- Generic Modal Structure (Os IDs s√£o usados pelo JS para injetar/controlar) -->
    <!-- Deposit -->
    <div id="deposit-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none">
        <div class="card w-full max-w-sm pointer-events-auto relative">
            <h3 class="font-bold text-lg mb-6 font-[var(--font-display)]">DEPOSITAR</h3>
            <div id="deposit-step-1">
                <input type="number" id="deposit-amount" class="form-input" placeholder="Valor em R$ (M√≠n 20)">
                <div class="grid grid-cols-3 gap-2 mb-4">
                    <button class="deposit-preset-btn glass-card text-xs font-bold py-2 hover:bg-[var(--bg-input)]" data-value="20">20</button>
                    <button class="deposit-preset-btn glass-card text-xs font-bold py-2 hover:bg-[var(--bg-input)]" data-value="50">50</button>
                    <button class="deposit-preset-btn glass-card text-xs font-bold py-2 hover:bg-[var(--bg-input)]" data-value="100">100</button>
                </div>
                <input type="text" id="deposit-coupon-input" class="form-input uppercase" placeholder="CUPOM (Opcional)">
                <p id="deposit-error-msg" class="text-[var(--accent-orange)] text-xs hidden mb-2 text-center"></p>
                <div class="flex gap-2 mt-4">
                    <button id="deposit-modal-cancel" class="flex-1 glass-card py-3 font-bold text-xs text-[var(--text-secondary)]">CANCELAR</button>
                    <button id="deposit-confirm-btn" class="flex-1 glass-card bg-green-600 text-white border-none py-3 font-bold text-xs hover:bg-green-500">GERAR PIX</button>
                </div>
                <div id="deposit-loader" class="hidden text-center mt-4"><div class="loader w-6 h-6 mx-auto"></div></div>
            </div>
            <div id="deposit-step-2" class="hidden text-center">
                <div class="bg-white p-2 rounded inline-block mb-4"><img id="deposit-qrcode-img" class="w-40 h-40"></div>
                <div class="flex bg-[var(--bg-input)] p-2 rounded mb-4 border border-[var(--border-color)]">
                    <input id="deposit-copypaste" class="bg-transparent w-full text-xs truncate outline-none text-[var(--text-secondary)]" readonly>
                    <button id="deposit-copy-btn" class="text-[var(--primary-purple)] font-bold text-xs ml-2">COPIAR</button>
                </div>
                <button id="deposit-finish-btn" class="w-full glass-card py-3 font-bold">FECHAR</button>
            </div>
        </div>
    </div>

    <!-- Withdraw -->
    <div id="withdraw-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none">
        <div class="card w-full max-w-sm pointer-events-auto">
            <h3 class="font-bold text-lg mb-2 font-[var(--font-display)]">SACAR</h3>
            <p class="text-xs text-[var(--text-secondary)] mb-4">Transfer√™ncia via PIX para seu CPF.</p>
            <input id="withdraw-amount" type="number" class="form-input" placeholder="Qtd Glitchcoins">
            <div class="flex justify-between text-xs mb-4 text-[var(--text-secondary)]">
                <span>Dispon√≠vel:</span><span id="withdraw-max-balance" class="text-white font-bold">GC 0.00</span>
            </div>
            <input id="withdraw-pix-key" class="form-input bg-[var(--bg-body)]" readonly>
            <p id="withdraw-error-msg" class="text-[var(--accent-orange)] text-xs hidden mb-2 text-center"></p>
            <div class="flex gap-2">
                <button id="withdraw-modal-cancel" class="flex-1 glass-card py-3 font-bold text-xs text-[var(--text-secondary)]">CANCELAR</button>
                <button id="withdraw-confirm-btn" class="flex-1 glass-card bg-[var(--primary-purple)] text-white border-none py-3 font-bold text-xs">SOLICITAR</button>
            </div>
            <div id="withdraw-loader" class="hidden text-center mt-4"><div class="loader w-6 h-6 mx-auto"></div></div>
        </div>
    </div>

    <!-- Connect -->
    <div id="connect-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none">
        <div class="card w-full max-w-sm pointer-events-auto text-center">
            <h3 id="connect-modal-title" class="font-bold text-lg mb-6 font-[var(--font-display)]">CONECTAR CONTA</h3>
            <input id="riot-id-input" class="form-input text-center" placeholder="Nome#TAG">
            <div class="flex items-center justify-center gap-2 mb-6">
                <input type="checkbox" id="connect-terms-check" class="accent-[var(--primary-purple)]">
                <label for="connect-terms-check" class="text-xs text-[var(--text-secondary)]">Confirmo que esta conta √© minha.</label>
            </div>
            <p id="connect-error-msg" class="text-[var(--accent-orange)] text-xs hidden mb-4"></p>
            <div class="flex gap-2">
                <button id="connect-modal-cancel" class="flex-1 glass-card py-3 font-bold text-xs text-[var(--text-secondary)]">VOLTAR</button>
                <button id="connect-modal-submit" class="flex-1 glass-card bg-[var(--primary-blue)] text-white border-none py-3 font-bold text-xs opacity-50" disabled>VINCULAR</button>
            </div>
            <div id="connect-loader" class="hidden text-center mt-4"><div class="loader w-6 h-6 mx-auto"></div></div>
        </div>
    </div>

    <!-- KYC -->
    <div id="kyc-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none">
        <div class="card w-full max-w-sm pointer-events-auto">
            <h3 class="font-bold text-lg mb-6 font-[var(--font-display)]">DADOS PESSOAIS</h3>
            <form id="kyc-form" class="space-y-3">
                <input id="kyc-modal-fullname" class="form-input" placeholder="Nome Completo" required>
                <input id="kyc-modal-cpf" class="form-input" placeholder="CPF" required>
                <input type="date" id="kyc-modal-birthdate" class="form-input text-[var(--text-secondary)]" required>
                <p id="kyc-error-msg" class="text-[var(--accent-orange)] text-xs hidden text-center"></p>
                <div class="flex gap-2 mt-4">
                    <button type="button" id="kyc-modal-cancel" class="flex-1 glass-card py-3 font-bold text-xs text-[var(--text-secondary)]">CANCELAR</button>
                    <button type="submit" id="kyc-modal-submit" class="flex-1 glass-card bg-[var(--primary-blue)] text-white border-none py-3 font-bold text-xs">SALVAR</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bet Slip -->
    <div id="bet-slip-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none">
        <div class="card w-full max-w-sm pointer-events-auto flex flex-col max-h-[80vh]">
            <div class="flex justify-between items-center mb-4 pb-4 border-b border-[var(--border-color)]">
                <h3 class="font-bold font-[var(--font-display)]">BOLETIM DE APOSTAS</h3>
                <button id="bet-slip-modal-close" class="text-2xl hover:text-[var(--accent-orange)]">&times;</button>
            </div>
            
            <div id="bet-slip-list" class="flex-1 overflow-y-auto space-y-2 mb-4 pr-1 custom-scroll"></div>
            
            <div class="pt-4 border-t border-[var(--border-color)]">
                <p id="bet-slip-limit-info" class="text-xs text-[var(--accent-orange)] text-center hidden mb-2"></p>
                
                <div class="flex justify-between text-sm mb-2">
                    <span class="text-[var(--text-secondary)]">Multiplicador Total:</span>
                    <span id="bet-slip-total-odd" class="font-bold text-[var(--primary-purple)]">1.00x</span>
                </div>
                
                <input type="number" id="bet-amount-input" class="form-input text-center font-bold text-lg mb-2" value="10">
                
                <div class="flex justify-between font-bold mb-4">
                    <span class="text-[var(--text-secondary)]">Retorno Potencial:</span>
                    <span id="bet-potential-winnings" class="text-[var(--accent-cyan)]">GC 10.00</span>
                </div>
                
                <p id="bet-slip-error-msg" class="text-[var(--accent-orange)] text-xs text-center hidden mb-2"></p>
                
                <button id="place-bet-btn" class="w-full glass-card bg-[var(--primary-purple)] text-white border-none py-3 font-bold shadow-[var(--shadow-glow)] hover:brightness-110">
                    ACEITAR DESAFIO
                </button>
                <div id="place-bet-loader" class="hidden text-center mt-2"><div class="loader w-6 h-6 mx-auto"></div></div>
            </div>
        </div>
    </div>

    <!-- Request Bet (Custom) -->
    <div id="request-bet-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none">
        <div class="card w-full max-w-sm pointer-events-auto text-center">
            <h3 class="font-bold text-lg mb-4 font-[var(--font-display)]">META PERSONALIZADA</h3>
            
            <div id="request-form-container">
                <p class="text-sm text-[var(--text-secondary)] mb-4">Quantas <span id="request-target-label" class="text-white font-bold">Kills</span> voc√™ far√°?</p>
                <input type="number" id="request-target-input" class="form-input text-center font-bold text-xl mb-2">
                <p id="request-error-msg" class="text-[var(--accent-orange)] text-xs mb-4 hidden"></p>
                <div class="flex gap-2">
                    <button id="request-modal-cancel" class="flex-1 glass-card py-3 font-bold text-xs text-[var(--text-secondary)]">CANCELAR</button>
                    <button id="request-modal-submit" class="flex-1 glass-card bg-[var(--primary-purple)] text-white border-none py-3 font-bold text-xs">CALCULAR</button>
                </div>
            </div>

            <div id="request-result-container" class="hidden">
                <div class="bg-[var(--bg-input)] p-4 rounded-xl mb-6 border border-[var(--primary-purple)]">
                    <p class="text-xs text-[var(--text-secondary)]">Multiplicador Calculado</p>
                    <span id="request-result-odd" class="text-4xl font-bold text-[var(--primary-purple)] font-[var(--font-display)]">1.00x</span>
                    <h4 id="request-result-title" class="font-bold mt-2 text-sm text-white">...</h4>
                </div>
                <button id="request-add-to-slip" class="w-full glass-card bg-[var(--primary-blue)] text-white border-none py-3 font-bold mb-2">ADICIONAR AO BOLETIM</button>
                <button id="request-try-again" class="text-xs text-[var(--text-secondary)] hover:text-white underline">Tentar outro valor</button>
            </div>
        </div>
    </div>

    <!-- Toast Message -->
    <div id="message-modal" class="hidden fixed top-20 left-1/2 -translate-x-1/2 z-[200]">
        <div id="message-modal-content" class="px-6 py-3 rounded-full shadow-[var(--shadow-glow)] font-bold text-sm border border-[var(--border-color)] backdrop-blur-md"></div>
    </div>

    <!-- JS v3.4 -->
    <script type="module" src="app.js?v=3.4"></script>
    <!-- Script de Tema (Simples, Inline para evitar flash) -->
    <script>
        const themeToggleBtn = document.getElementById('theme-toggle');
        if(themeToggleBtn) {
            themeToggleBtn.addEventListener('click', () => {
                const html = document.documentElement;
                const current = html.getAttribute('data-theme');
                const next = current === 'dark' ? 'light' : 'dark';
                html.setAttribute('data-theme', next);
                localStorage.setItem('theme', next);
            });
            // Init
            const saved = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', saved);
        }
    </script>
</body>
</html>